var Countdown=function(t){function e(e){void 0===e&&(e=null),t.call(this),this._runTime=3,this.touchEnabled=!0,this.once(egret.Event.ADDED_TO_STAGE,this.createView,this),this._textureNames=e}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.graphics.beginFill(0,.3),this.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),this.graphics.endFill(),this._info=new egret.TextField,this._info.width=300,this._info.height=300,this._info.size=200,this._info.textAlign="center",this._info.verticalAlign=egret.VerticalAlign.MIDDLE,this._info.strokeColor=16711680,this._info.stroke=3,this._info.x=this.width-this._info.width>>1,this._info.y=this.height-this._info.height>>1,this._bmp=new egret.Bitmap,null==this._textureNames?this.addChild(this._info):this.addChild(this._bmp),this._timer=new egret.Timer(1e3),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)},s.run=function(){this._timer.running||(this._timer.reset(),this._timer.start(),this._info.text=this._runTime+"",null!=this._textureNames&&(this._bmp.texture=RES.getRes(this._textureNames[0])))},s.onTimer=function(t){return this._timer.currentCount>this._runTime?(this._timer.stop(),void this.dispatchEventWith("CountdownComplete")):void(null!=this._textureNames?this._bmp.texture=RES.getRes(this._textureNames[this._timer.currentCount]):this._info.text=this._runTime-this._timer.currentCount+"")},e}(egret.Sprite);egret.registerClass(Countdown,"Countdown");var Game=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.init,this)}__extends(e,t);var i=__define,s=e,h=s.prototype;return i(e,"instance",function(){return this._instance||(this._instance=new e),this._instance}),h.init=function(){GameSound.sound_hit1=RES.getRes("m1"),GameSound.sound_hit2=RES.getRes("hit"),this.onInit(),window.gInitialize()},h.onInit=function(){var t=this;this._home=new egret.Sprite;var e=new egret.Bitmap(RES.getRes("home"));e.height=this.stage.stageHeight,this._home.addChild(e);var i=new egret.Bitmap(RES.getRes("btn"));i.x=75,i.y=this.stage.stageHeight-i.height-70,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.sound_hit2.play(0,1),t._home.visible=!1,t.reset()},this),this._home.addChild(i);var s=new egret.Bitmap(RES.getRes("back"));s.x=this.stage.stageWidth-i.width-75,s.y=this.stage.stageHeight-s.height-70,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.sound_hit2.play(0,1),window.backHome()},this),this._home.addChild(s);var h=new egret.Bitmap(RES.getRes("bg"));h.height=this.stage.stageHeight,this.addChild(h),this._pspr=new egret.Sprite,this._pspr.x=82,this._pspr.y=69,this.addChild(this._pspr),this._mask=new egret.Bitmap(RES.getRes("mask")),this._mask.height=this.stage.stageHeight,this._mask.visible=!1,this.addChild(this._mask),this._sp=new egret.Bitmap,this._sp.x=163,this._sp.y=170,this._sp.visible=!1,this.addChild(this._sp);var n=new egret.Bitmap(RES.getRes("bgitem"));n.height=this.stage.stageHeight,this.addChild(n),this._restart=new egret.Bitmap(RES.getRes("restart")),this._restart.name="restart",this._restart.touchEnabled=!0,this._restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reStart,this),this._restart.x=this.stage.stageWidth-this._restart.width-75,this._restart.y=h.height-245,this.addChild(this._restart),this._back=new egret.Bitmap(RES.getRes("back")),this._back.name="back",this._back.touchEnabled=!0,this._back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameSound.sound_hit2.play(0,1),window.backHome()},this),this._back.x=this.stage.stageWidth-this._back.width-75,this._back.y=this._restart.y+this._restart.height+20,this.addChild(this._back),this._p1=new egret.Bitmap(RES.getRes("p1")),this._p1.x=44,this._p1.y=48,this._p1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._p2=new egret.Bitmap(RES.getRes("p2")),this._p2.x=this._p1.x+this._p1.width+22,this._p2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._p3=new egret.Bitmap(RES.getRes("p3")),this._p3.y=this._p1.y+this._p1.height+20,this._p3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._p4=new egret.Bitmap(RES.getRes("p4")),this._p4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this._parr=[this._p1,this._p2,this._p3,this._p4],this._iarr=[new egret.Point(44,48),new egret.Point(this._p1.x+this._p1.width+22,48),new egret.Point(44,this._p1.y+this._p1.height+20),new egret.Point(this._p2.x,this._p3.y)],this._tips=new egret.Bitmap(RES.getRes("tips")),this._tips.height=this.stage.stageHeight,this._tips.name="tips",this._tips.visible=!1,this.addChild(this._tips),this.addChild(this._home)},h.start=function(){this._home.visible=!0},h.reset=function(){this._mask.visible&&(this._mask.visible=!1),this._sp.visible=!1,this._parr=this.rSort(this._parr),this._pspr.removeChildren();for(var t=0,e=this._parr.length;e>t;t++)this._parr[t].x=486-this._parr[t].width>>1,this._parr[t].y=670-this._parr[t].height>>1,this._pspr.addChild(this._parr[t]);this.pMove(0)},h.reStart=function(t){this._sp.visible&&(GameSound.sound_hit2.play(0,1),this.reset())},h.onTouch=function(t){GameSound.sound_hit1.play(0,1),this._tips.visible&&(this._tips.visible=!1),this.adTouch(!1);for(var e=Math.floor(15*Math.random()+1);this._random==e;)e=Math.floor(15*Math.random()+1);this._random=e,this._mask.visible=!0,this._sp.texture=RES.getRes("s"+e),this._sp.visible=!0},h.rSort=function(t){for(var e=[],i=0,s=0,h=t.length;h>s;s++)i=Math.floor(Math.random()*t.length),e.push(t[i]),t.splice(i,1);return e},h.pMove=function(t){var e=this;return t>=this._parr.length?void("tips"==this._tips.name?(this._tips.name="",this._tips.visible=!0,setTimeout(function(){e._tips.visible=!1,e.adTouch(!0)},2e3)):this.adTouch(!0)):void egret.Tween.get(this._parr[t]).to({x:this._iarr[t].x,y:this._iarr[t].y},250).call(this.pMove,this,[++t])},h.adTouch=function(t){for(var e=0,i=this._parr.length;i>e;e++)this._parr[e].touchEnabled=t},e}(egret.DisplayObjectContainer);egret.registerClass(Game,"Game");var GameSound=function(){function t(){}var e=(__define,t);e.prototype;return t.setSoundBG=function(e){t._soundBG=e,t.onSoundComplete(null)},t.onSoundComplete=function(e){t._soundChannel&&t._soundChannel.stop(),t._soundChannel=t._soundBG.play(0,0)},t}();egret.registerClass(GameSound,"GameSound");var LoadingUI=function(t){function e(){t.call(this),this.graphics.beginFill(16777215,1),this.graphics.drawRect(0,0,Main.stage.stageWidth,Main.stage.stageHeight),this.graphics.endFill(),this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.loadingshapedemo=new egret.Shape,this.loadingshapedemo.graphics.lineStyle(20,15724527),this.loadingshapedemo.graphics.drawArc(Main.stage.stageWidth/2,Main.stage.stageHeight/2,200,0,2*Math.PI,!1),this.loadingshapedemo.graphics.endFill(),this.addChild(this.loadingshapedemo),this.textField=new egret.TextField,this.textField.size=40,this.textField.y=300,this.textField.height=100,this.textField.textAlign=egret.HorizontalAlign.CENTER,this.textField.verticalAlign=egret.VerticalAlign.MIDDLE,this.textField.text="loading...",this.textField.textColor=0,this.textField.bold=!0,this.textField.x=Main.stage.stageWidth-this.textField.width>>1,this.textField.y=Main.stage.stageHeight-this.textField.height>>1,this.addChild(this.textField),this.loadingshape=new egret.Shape,this.addChild(this.loadingshape)},s.setProgress=function(t,e){this.loadingshape.graphics.clear(),this.loadingshape.graphics.lineStyle(20,13970206),this.loadingshape.graphics.drawArc(Main.stage.stageWidth/2,Main.stage.stageHeight/2,200,0,2*Math.PI*t/e,!1),this.loadingshape.graphics.endFill()},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){e.stage=this.stage,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.txt","resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.createGameScene())},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"preload"==t.groupName},s.createGameScene=function(){this.addChild(Game.instance)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Tips=function(t){function e(){t.call(this),this.graphics.beginFill(0,.75),this.graphics.drawRect(0,0,Main.stage.stageWidth,Main.stage.stageHeight),this.graphics.endFill();var e=new egret.Bitmap(RES.getRes("tips"));e.x=this.width-e.width>>1,e.y=this.height-e.height>>1,this.addChild(e),this.touchEnabled=!0}__extends(e,t);var i=(__define,e);i.prototype;return e}(egret.Sprite);egret.registerClass(Tips,"Tips");