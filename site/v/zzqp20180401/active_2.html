<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no" />
    <title>青岛啤酒华中</title>
    <script src="js/rem.js"></script>
    <link rel="stylesheet" href="css/active_2.css?v=1.5">
</head>

<body>
    <div class="wrap">
        <div class="header">
            <img src="img/guess/light-1.png" class="light-1">
            <img src="img/guess/light-2.png" class="light-2">
            <img src="img/guess/light-3.png" class="light-3">
            <img src="img/guess/light-4.png" class="light-4">
            <img src="img/guess/slogan-3.png" class="slogan">
        </div>
        <p class="notice">活动规则及说明</p>
        <div class="select">
            <div class="slides">
                <input type="button" class="slide1 slide active" value="第一页">
                <input type="button" class="slide2 slide" value="第二页">
                <input type="button" class="slide3 slide" value="第三页">
                <input type="button" class="slide4 slide" value="第四页">
            </div>
            <div class="content">
                <div class="list page1" item="1" country="巴西" name="内马尔·达·席瓦尔·儒尼奥尔">
                    <div class="num">
                        <img src="img/guess/num-1.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-1.png" class="player1">
                    </div>
                </div>
                <div class="list page1" item="2" country="阿根廷" name="里奥·梅西">
                    <div class="num">
                        <img src="img/guess/num-2.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-2.png" class="player2">
                    </div>
                </div>
                <div class="list page1" item="3" country="葡萄牙" name="克里斯蒂亚诺·罗纳尔多">
                    <div class="num">
                        <img src="img/guess/num-3.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-3.png" class="player3">
                    </div>
                </div>
                <div class="list page1" item="4" country="法国" name="保罗·博格巴">
                    <div class="num">
                        <img src="img/guess/num-4.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-4.png" class="player4">
                    </div>
                </div>
                <div class="list page2" item="5" country="德国" name="托马斯·穆勒">
                    <div class="num">
                        <img src="img/guess/num-5.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-5.png" class="player5">
                    </div>
                </div>
                <div class="list page2" item="6" country="法国" name="安东尼·格里兹曼">
                    <div class="num">
                        <img src="img/guess/num-6.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-6.png" class="player6">
                    </div>
                </div>
                <div class="list page2" item="7" country="乌拉圭" name="路易斯·阿尔贝托·苏亚雷斯">
                    <div class="num">
                        <img src="img/guess/num-7.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-7.png" class="player7">
                    </div>
                </div>
                <div class="list page2" item="8" country="比利时" name="埃登·阿扎尔">
                    <div class="num">
                        <img src="img/guess/num-8.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-8.png" class="player8">
                    </div>
                </div>
                <div class="list page3" item="9" country="阿根廷" name="冈萨洛·伊瓜因">
                    <div class="num">
                        <img src="img/guess/num-9.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-9.png" class="player9">
                    </div>
                </div>
                <div class="list page3" item="10" country="西班牙" name="阿尔瓦罗·莫拉塔">
                    <div class="num">
                        <img src="img/guess/num-10.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-10.png" class="player10">
                    </div>
                </div>
                <div class="list page3" item="11" country="巴西" name="加布里埃尔·热苏斯">
                    <div class="num">
                        <img src="img/guess/num-11.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-11.png" class="player11">
                    </div>
                </div>
                <div class="list page3" item="12" country="德国" name="桑德罗·瓦格纳">
                    <div class="num">
                        <img src="img/guess/num-12.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-12.png" class="player12">
                    </div>
                </div>
                <div class="list page4" item="13" country="德国" name="蒂莫·韦尔纳">
                    <div class="num">
                        <img src="img/guess/num-13.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-13.png" class="player13">
                    </div>
                </div>
                <div class="list page4" item="14" country="乌拉圭" name="埃尔森·卡瓦尼">
                    <div class="num">
                        <img src="img/guess/num-14.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-14.png" class="player14">
                    </div>
                </div>
                <div class="list page4" item="15" country="英格兰" name="哈里·凯恩">
                    <div class="num">
                        <img src="img/guess/num-15.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-15.png" class="player15">
                    </div>
                </div>
                <div class="list page4" item="16" country="阿根廷" name="罗梅卢·卢卡库">
                    <div class="num">
                        <img src="img/guess/num-16.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-16.png" class="player16">
                    </div>
                </div>
                <div class="list page4" item="17" country="其他" name="其他">
                    <div class="num">
                        <img src="img/guess/num-17.png">
                    </div>
                    <div class="player">
                        <img src="img/guess/player-17.png" class="player17">
                    </div>
                </div>
                <div class="selected">
                    <p>您所支持的球星</p>
                    <img src="" class="jack">
                    <p class="love"></p>
                </div>
            </div>
        </div>
        <div class="rule">
            <img src="img/guess/active2.png?v=1">
            <img src="img/guess/close.png" class="close">
        </div>
        <div class="mask">
            <img src="img/guess/football.png">
            <div class="alert">
                <p>您确认支持<span id="country"></span>
                    <span id="choose"></span>？
                    <br>选择仅此一次，后续无法更改，三思哦~</p>
                <div class="btns">
                    <input type="button" value="取消" class="cancel">
                    <input type="button" value="确定" class="confirm">
                </div>
            </div>
        </div>
    </div>
</body>
<script src="js/jquery-2.2.4.min.js"></script>
<script src="/static/js/vve/10core.js"></script>
<script src="/static/js/vve/11tool.js"></script>
<script src="/static/js/vve/12event.js"></script>
<script src="/static/js/vve/20ajx.js"></script>
<script src="/static/js/vve/21tpl.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="/v/js/cfg.js?v=1.0.0"></script>
<script src="/v/js/publictip.js?v=3.0.1"></script>
<script src="/static/js/wx/jsdk.js?v=3"></script>
<script src="/static/js/font.js"></script>
<script>
    ini_wxshare(vge.zzqpappid);
    // 隐藏微信右上角菜单
    wx.ready(function () {
        wx.hideOptionMenu();
    });
</script>
<script>
    var openid = sessionStorage.openid;
    $(document).ready(function () {
        var team = '';
        loading();
        getUserInfo();

        function init(jo, flag) {
            $('.page1').css('display', 'block');
            for (var i = 0; i < $('.slide').length; i++) {
                (function (i) {
                    $('.slide').eq(i).on('click', function () {
                        $('.slide').removeClass('active');
                        $(this).addClass('active');
                        switch (i) {
                            case 0:
                                $('.page1').css('display', 'block');
                                $('.page2').css('display', 'none');
                                $('.page3').css('display', 'none');
                                $('.page4').css('display', 'none');
                                break;
                            case 1:
                                $('.page1').css('display', 'none');
                                $('.page2').css('display', 'block');
                                $('.page3').css('display', 'none');
                                $('.page4').css('display', 'none');
                                break;
                            case 2:
                                $('.page1').css('display', 'none');
                                $('.page2').css('display', 'none');
                                $('.page3').css('display', 'block');
                                $('.page4').css('display', 'none');
                                break;
                            case 3:
                                $('.page1').css('display', 'none');
                                $('.page2').css('display', 'none');
                                $('.page3').css('display', 'none');
                                $('.page4').css('display', 'block');
                                break;
                        }
                    });
                })(i);
            }
            if (flag) { //参与过
                // $('[item=' + jo + ']').addClass('gray');
                // for (var i = 0; i < $('.list').length; i++) {
                //     (function (i) {
                //         $('.list').eq(i).on('click', function () {
                //             title_tip('尊敬的用户', '你都选了' + $('[item=' + jo + ']').attr('country') +
                //                 '了,别再点了', '我知道了');
                //         });
                //     })(i);
                // }
                var s = $('[item=' + jo + '] .player').find('img').attr('src').replace('.png','s.png');
                $('.jack').attr('src', s);
                $('.selected').css('display', 'block');
                $('.slide').unbind();
                $('.content').addClass('noPointer');
            } else { //未参与过
                for (var i = 0; i < $('.list').length; i++) {
                    (function (i) {
                        $('.list').eq(i).on('click', function () {
                            $('#country').text($('.list').eq(i).attr('country'));
                            $('#choose').text('"' + $('.list').eq(i).attr('name') + '"');
                            $('.mask').css('display', 'block');
                            team = $('.list').eq(i).attr('item');
                        });
                    })(i);
                }
            }
        }

        function getUserInfo() { //获取用户参与信息
            var data = {
                "openid": openid,
                "transType": '2'
            };
            $.ajax({
                type: "POST",
                url: vge.zzqp + '/DBTHNQPInterface/vpointsGuess/footballStatus',
                data: JSON.stringify(data),
                dataType: 'json',
                success: function (res, status, xhr) {
                    console.log(res);
                    loaded();
                    if (res.result.code == '0') {
                        if (res.result.businessCode == '0') { //用户参与过
                            init(res.reply.supportStar, true);
                        } else if (res.result.businessCode == '000003') { //未参与过
                            init(res.reply, false);
                        } else {
                            title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                        }
                    } else { //code!='0'
                        title_tip('尊敬的用户', res.result.msg, '我知道了');
                    }
                },
                error: function (res, status, xhr) {
                    loaded();
                    title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                    console.log(res);
                }
            });
        }

        function setSelect() { //确认选择支持的球队
            loading();
            var data = {
                "openid": openid,
                "transType": '2',
                "supportStar": team
            };
            $.ajax({
                type: "POST",
                url: vge.zzqp + '/DBTHNQPInterface/vpointsGuess/footballGuess',
                data: JSON.stringify(data),
                dataType: 'json',
                success: function (res, status, xhr) {
                    console.log(res);
                    loaded();
                    if (res.result.code == '0') {
                        if (res.result.businessCode == '0') { //竞猜成功
                            title_tip('尊敬的用户', '竞猜成功', '我知道了', '', load);
                        } else {
                            title_tip('尊敬的用户', res.result.msg, '我知道了');
                        }
                    } else {
                        title_tip('尊敬的用户', res.result.msg, '我知道了');
                    }
                },
                error: function (res, status, xhr) {
                    loaded();
                    title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                    console.log(res);
                }
            });
        }

        function loaded() {
            $('.loading').css('display', 'none');
        }

        function loading() {
            $('.loading').css('display', 'block');
        }

        function load() {
            window.location.reload();
        }
        $('.confirm').on('click', function () { //确定
            setSelect();
            $('.mask').css('display', 'none');
        });
        $('.cancel').on('click', function () { //取消
            $('.mask').css('display', 'none');
        });
        $('.notice').on('click',function(){
            $('.rule').css('display', 'block');
        });
        $('.close').on('click',function(){
            $('.rule').css('display', 'none');
        });
    });
</script>

</html>