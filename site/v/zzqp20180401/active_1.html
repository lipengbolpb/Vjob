<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no" />
    <title>青岛啤酒华中</title>
    <script src="js/rem.js"></script>
    <link rel="stylesheet" href="css/active_1.css?v=1.15">
</head>

<body>
    <div class="wrap">
        <div class="header">
            <img src="img/guess/light-1.png" class="light-1">
            <img src="img/guess/light-2.png" class="light-2">
            <img src="img/guess/light-3.png" class="light-3">
            <img src="img/guess/light-4.png" class="light-4">
            <img src="img/guess/slogan-2.png" class="slogan">
        </div>
        <p class="notice">请选择您所支持的球队，若该球队最终夺冠，您将有机会获得大奖奖励哦</p>
        <div class="select">
            <div class="slides">
                <input type="button" class="slide1 slide active" value="欧洲">
                <input type="button" class="slide2 slide" value="南美洲">
                <input type="button" class="slide3 slide" value="亚洲">
                <input type="button" class="slide4 slide" value="非洲">
                <input type="button" class="slide5 slide" value="北美...洲">
            </div>
            <div class="content">
                <div class="Europe country" key="2" item="214">
                    <img src="img/guess/E-1.png">
                    <p class="name">俄罗斯</p>
                </div>
                <div class="Europe country" key="2" item="203">
                    <img src="img/guess/E-2.png">
                    <p class="name">比利时</p>
                </div>
                <div class="Europe country" key="2" item="204">
                    <img src="img/guess/E-3.png">
                    <p class="name">英格兰</p>
                </div>
                <div class="Europe country" key="2" item="208">
                    <img src="img/guess/E-4.png">
                    <p class="name">法国</p>
                </div>
                <div class="Europe country" key="2" item="202">
                    <img src="img/guess/E-5.png">
                    <p class="name">西班牙</p>
                </div>
                <div class="Europe country" key="2" item="205">
                    <img src="img/guess/E-6.png">
                    <p class="name">波兰</p>
                </div>
                <div class="Europe country" key="2" item="206">
                    <img src="img/guess/E-7.png">
                    <p class="name">冰岛</p>
                </div>
                <div class="Europe country" key="2" item="209">
                    <img src="img/guess/E-8.png">
                    <p class="name">葡萄牙</p>
                </div>
                <div class="Europe country" key="2" item="201">
                    <img src="img/guess/E-9.png">
                    <p class="name">德国</p>
                </div>
                <div class="Europe country" key="2" item="213">
                    <img src="img/guess/E-10.png">
                    <p class="name">丹麦</p>
                </div>
                <div class="Europe country" key="2" item="211">
                    <img src="img/guess/E-11.png">
                    <p class="name">瑞典</p>
                </div>
                <div class="Europe country" key="2" item="212">
                    <img src="img/guess/E-12.png">
                    <p class="name">克罗地亚</p>
                </div>
                <div class="Europe country" key="2" item="210">
                    <img src="img/guess/E-13.png">
                    <p class="name">瑞士</p>
                </div>
                <div class="Europe country" key="2" item="207">
                    <img src="img/guess/E-14.png">
                    <p class="name">塞尔维亚</p>
                </div>
                <div class="South country" key="4" item="401">
                    <img src="img/guess/S-1.png">
                    <p class="name">巴西</p>
                </div>
                <div class="South country" key="4" item="402">
                    <img src="img/guess/S-2.png">
                    <p class="name">乌拉圭</p>
                </div>
                <div class="South country" key="4" item="403">
                    <img src="img/guess/S-3.png">
                    <p class="name">阿根廷</p>
                </div>
                <div class="South country" key="4" item="404">
                    <img src="img/guess/S-4.png">
                    <p class="name">哥伦比亚</p>
                </div>
                <div class="South country" key="4" item="405">
                    <img src="img/guess/S-5.png">
                    <p class="name">秘鲁</p>
                </div>
                <div class="Asia country" key="1" item="101">
                    <img src="img/guess/A-1.png">
                    <p class="name">伊朗</p>
                </div>
                <div class="Asia country" key="1" item="102">
                    <img src="img/guess/A-2.png">
                    <p class="name">日本</p>
                </div>
                <div class="Asia country" key="1" item="103">
                    <img src="img/guess/A-3.png">
                    <p class="name">韩国</p>
                </div>
                <div class="Asia country" key="1" item="104">
                    <img src="img/guess/A-4.png">
                    <p class="name">沙特阿拉伯</p>
                </div>
                <div class="Asia country" key="1" item="105">
                    <img src="img/guess/A-5.png">
                    <p class="name">澳大利亚</p>
                </div>
                <div class="Africa country" key="3" item="302">
                    <img src="img/guess/F-1.png">
                    <p class="name">尼日利亚</p>
                </div>
                <div class="Africa country" key="3" item="301">
                    <img src="img/guess/F-2.png">
                    <p class="name">埃及</p>
                </div>
                <div class="Africa country" key="3" item="304">
                    <img src="img/guess/F-3.png">
                    <p class="name">塞内加尔</p>
                </div>
                <div class="Africa country" key="3" item="305">
                    <img src="img/guess/F-4.png">
                    <p class="name">摩洛哥</p>
                </div>
                <div class="Africa country" key="3" item="303">
                    <img src="img/guess/F-5.png">
                    <p class="name">突尼斯</p>
                </div>
                <div class="North country" key="5" item="501">
                    <img src="img/guess/N-1.png">
                    <p class="name">墨西哥</p>
                </div>
                <div class="North country" key="5" item="502">
                    <img src="img/guess/N-2.png">
                    <p class="name">哥斯达黎加</p>
                </div>
                <div class="North country" key="5" item="503">
                    <img src="img/guess/N-3.png">
                    <p class="name">巴拿马</p>
                </div>
                <div class="selected">
                    <p>您所支持的球队</p>
                    <img src="" class="jack">
                    <p class="love"></p>
                </div>
            </div>
        </div>
        <p class="explain">活动规则及说明</p>
        <div class="rule">
            <img src="img/guess/active1.png?v=1">
            <img src="img/guess/close.png" class="close">
        </div>
        <div class="mask">
            <img src="img/guess/football.png">
            <div class="alert">
                <p>您确认支持<span id="choose"></span>成为冠军球队吗？
                    <br>选择仅此一次，后续无法更改，三思哦~</p>
                <div class="btns">
                    <input type="button" value="取消" class="cancel">
                    <input type="button" value="确定" class="confirm">
                </div>
            </div>
        </div>
        <img src="img/loading.gif" class="loading">
    </div>
</body>
<script src="js/jquery-2.2.4.min.js"></script>
<script src="/static/js/vve/10core.js"></script>
<script src="/static/js/vve/11tool.js"></script>
<script src="/static/js/vve/12event.js"></script>
<script src="/static/js/vve/20ajx.js"></script>
<script src="/static/js/vve/21tpl.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="/v/js/cfg.js?v=1.0.0"></script>
<script src="/v/js/publictip.js?v=3.0.1"></script>
<script src="/static/js/wx/jsdk.js?v=3"></script>
<script src="/static/js/font.js"></script>
<script>
    ini_wxshare(vge.zzqpappid);
    // 隐藏微信右上角菜单
    wx.ready(function () {
        wx.hideOptionMenu();
    });
</script>
<script>
    var openid = sessionStorage.openid;
    $(document).ready(function () {
        var team = '';
        loading();
        getUserInfo();

        function init(jo, flag) { //初始化显示
            $('.Europe').css('display', 'block');
            for (var i = 0; i < $('.slide').length; i++) {
                (function (i) {
                    $('.slide').eq(i).on('click', function () {
                        console.log(i);
                        $('.slide').removeClass('active');
                        $(this).addClass('active');
                        switch (i) {
                            case 0:
                                $('.Europe').css('display', 'block');
                                $('.South').css('display', 'none');
                                $('.Asia').css('display', 'none');
                                $('.Africa').css('display', 'none');
                                $('.North').css('display', 'none');
                                break;
                            case 1:
                                $('.Europe').css('display', 'none');
                                $('.South').css('display', 'block');
                                $('.Asia').css('display', 'none');
                                $('.Africa').css('display', 'none');
                                $('.North').css('display', 'none');
                                break;
                            case 2:
                                $('.Europe').css('display', 'none');
                                $('.South').css('display', 'none');
                                $('.Asia').css('display', 'block');
                                $('.Africa').css('display', 'none');
                                $('.North').css('display', 'none');
                                break;
                            case 3:
                                $('.Europe').css('display', 'none');
                                $('.South').css('display', 'none');
                                $('.Asia').css('display', 'none');
                                $('.Africa').css('display', 'block');
                                $('.North').css('display', 'none');
                                break;
                            case 4:
                                $('.Europe').css('display', 'none');
                                $('.South').css('display', 'none');
                                $('.Asia').css('display', 'none');
                                $('.Africa').css('display', 'none');
                                $('.North').css('display', 'block');
                                break;
                        }
                    });
                })(i);
            }
            if (flag) { //如果参与过，球队置灰，不能点击   
                $('.slide').unbind();
                $('.jack').attr('src', $('[item=' + jo + ']').find('img').attr('src'));
                $('.love').text($('[item=' + jo + ']').find('p').html());
                $('.selected').css('display', 'block');
                $('.content').addClass('noPointer');
            } else { //未参与过，可以选择支持球队
                for (var i = 0; i < $('.country').length; i++) {
                    (function (i) {
                        $('.country').eq(i).on('click', function () {
                            $('#choose').text('"' + $('.name').eq(i).html() + '"');
                            $('.mask').css('display', 'block');
                            team = $('.country').eq(i).attr('item');
                        });
                    })(i);
                }
            }
        }

        function getUserInfo() { //获取用户参与信息
            var data = {
                "openid": openid,
                "transType": '1'
            };
            $.ajax({
                type: "POST",
                url: vge.zzqp + '/DBTHNQPInterface/vpointsGuess/footballStatus',
                data: JSON.stringify(data),
                dataType: 'json',
                success: function (res, status, xhr) {
                    console.log(res);
                    loaded();
                    if (res.result.code == '0') {
                        if (res.result.businessCode == '0') { //用户参与过
                            init(res.reply.supportTeam, true);
                        } else if (res.result.businessCode == '000003') { //未参与过
                            init(res.reply, false);
                        } else {
                            title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                        }
                    } else { //code!='0'
                        title_tip('尊敬的用户', res.result.msg, '我知道了');
                    }
                },
                error: function (res, status, xhr) {
                    loaded();
                    title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                    console.log(res);
                }
            });
        }

        function setSelect() { //确认选择支持的球队
            loading();
            var data = {
                "openid": openid,
                "transType": '1',
                "supportTeam": team
            };
            $.ajax({
                type: "POST",
                url: vge.zzqp + '/DBTHNQPInterface/vpointsGuess/footballGuess',
                data: JSON.stringify(data),
                dataType: 'json',
                success: function (res, status, xhr) {
                    console.log(res);
                    loaded();
                    if (res.result.code == '0') {
                        if (res.result.businessCode == '0') { //竞猜成功
                            title_tip('尊敬的用户', '竞猜成功', '我知道了', '', load);
                        } else {
                            title_tip('尊敬的用户', res.result.msg, '我知道了');
                        }
                    } else {
                        title_tip('尊敬的用户', res.result.msg, '我知道了');
                    }
                },
                error: function (res, status, xhr) {
                    loaded();
                    title_tip('尊敬的用户', '呜呜，系统开了个小差，请稍后重试！', '我知道了');
                    console.log(res);
                }
            });
        }

        function loaded() {
            $('.loading').css('display', 'none');
        }

        function loading() {
            $('.loading').css('display', 'block');
        }

        function load() {
            window.location.reload();
        }
        $('.confirm').on('click', function () { //确定
            setSelect();
            $('.mask').css('display', 'none');
        });
        $('.cancel').on('click', function () { //取消
            $('.mask').css('display', 'none');
        });
        $('.explain').on('click',function(){
            $('.rule').css('display', 'block');
        });
        $('.close').on('click',function(){
            $('.rule').css('display', 'none');
        });
    });
</script>

</html>